現実世界のマイクロサービス：サービスに陰りが見え始め、いよいよ本気になるとき
============================================================================

[現実世界のマイクロサービス：サービスに陰りが見え始め、いよいよ本気になるとき](http://postd.cc/real-world-microservices-when-services-stop-playing-well-and-start-getting-real/)

- 2010年から2015年のTwitterの事例
- コンフィギュレーション管理、ログ処理、strace、tcpdumpなどの信頼できるツールはマイクロサービスにはあてはめられない
- Twitterがマイクロサービスに移行したときは、操作性を取り戻すためだけに何百もの（数千もの？）スタッフによる何年にもわたる取り組みが必要
- しかし、ここ数年はマイクロサービスをサポートするOSSがでてきた
  - データセンターやクラウドの詳細を簡潔にまとめるプロジェクト
  - システムの実行時間のステータスに可視性を加えるプロジェクト
  - サービスの記述を単純化してくれるプロジェクト
- サービス間の通信、すなわちRPCを制御できるツールが必要
- https://linkerd.io/
  - オペレータがサービス間のトラフィックをコマンド＆コントロールできるように設計されたプロキシ
  - トランスポート・セキュリティ、ロードバランシング、多重化、タイムアウト、リトライ、ルーティング
- コネクションやパケットよりもリクエストとレスポンスを、IPアドレスとポートよりもサービスやインスタンスを、それぞれ操作したい
- リクエストルーティング
  - 論理名、リクエストを表す。
    - `/http/1.1/GET/users/addあるいは/thrift/userService/addUser`
  - 具体名、サービスを表す
    - 具体名は、通常、ZooKeeper、etcd、consul、DNSなどのようなサービスディスカバリのバックエンドを表す
      - `/$/inet/users.example.com/8080`
  - および委譲テーブル（dtab）、具体名に対し論理名のマッピングを表す。
- [namerd](https://github.com/BuoyantIO/linkerd/tree/master/namerd)

![](https://blog.buoyant.io/post-images/namerd.png)
